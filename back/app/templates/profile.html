<div class="profile-container">
	<div class="profile">
		<div class="profile-photo">
			<img src="{{ user.image.url }}">
		</div>
		<div class="info">
			<div class="username-container">
				<h1 class="username">{{ user.username }}</h1>
				<div class="settings-icon">
					<i class="fas fa-cog link" href="/users/update"></i>
				</div>
			</div>
			<div class="actions">
				<button class="link challenge-btn" href="/game" data-i18n="profile.dash.1v1">Play 1v1</button>
			</div>
		</div>
	</div>

	<div class="stats">
		<div class="stat-card">
			<div class="stat-icon trophy">ğŸ†</div>
			<div class="stat-value">{{ user.wins }}</div>
			<div class="stat-label" data-i18n="profile.dash.wins">Total Wins</div>
		</div>

		<!-- loses -->
		<div class="stat-card">
			<div class="stat-icon trophy">XXX</div>
			<div class="stat-value">{{ user.losses }}</div>
			<div class="stat-label" data-i18n="profile.dash.losses">Total Losses</div>
		</div>
		
		<div class="stat-card">
			<div class="stat-icon clock">ğŸ•’</div>
			<div class="stat-value">{{ user.matches }}</div>
			<div class="stat-label" data-i18n="profile.dash.matches">Games Played</div>
		</div>
		
		<div class="stat-card">
			<div class="stat-icon tournament">ğŸ‘‘</div>
			<div class="stat-value">XXX</div>
			<div class="stat-label" data-i18n="profile.dash.tournament">Tournament Wins</div>
		</div>
	</div>

		<!-- Tabs -->
	<div class="tabs">
		<button class="tab active" onclick="showTab('match-history', this)">Match History</button>
		<button class="tab" onclick="showTab('friends-list', this)">Friends</button>
		<button class="tab" onclick="showTab('blocked-list', this)">Blocked</button>
		<button class="tab" onclick="showTab('users-list', this)">Other Users</button>
	</div>

	<!-- Match History -->
	<div id="match-history" class="tab-content">
		{% for match in matches %}
		<div class="tab-item">
			<div>
				<div class="match-players">{{ match.player1 }} vs {{ match.player2 }}</div>
				<div class="match-time">{{ match.created_at }}</div>
			</div>
			<div class="match-score">{{ match.score_player1 }} - {{ match.score_player2 }}</div>
		</div>
		{% endfor %}
	</div>

	<!-- Friends List -->
	<div id="friends-list" class="tab-content hidden">
		{% for friend in friends %}
		<div class="tab-item">
			<div class="match-players">
				<img src="{{ friend.image.url }}" class="user-avatar" />
				<span>{{ friend.username }}</span>
			</div>
			<div class="match-score">
				<span>{{ friend.wins }} - {{ friend.losses }}</span>
				{% if friend.is_online %}
					<span class="online-status">ğŸŸ¢</span>
				{% else %}
					<span class="online-status">ğŸ”´</span>
				{% endif %}
				<i class="fas fa-comment friend-icon" onclick="chat('{{ friend.username }}')"></i>
				<i class="fas fa-check friend-icon" onclick="deleteFriend('{{ friend.id }}')"></i>
				<i class="fas fa-ban friend-icon" onclick="blockUser('{{ friend.id }}')" style="color: brown;"></i>
			</div>
		</div>
		{% empty %}
		<p style="color: white;" data-i18n="friends.friends.empty">You don't have friends</p>
		{% endfor %}
	</div>

	<!-- Blocked Users -->
	<div id="blocked-list" class="tab-content hidden">
		{% for blocked in blockeds %}
		<div class="tab-item">
			<div class="match-players">
				<img src="{{ blocked.image.url }}" class="user-avatar" />
				<span>{{ blocked.username }}</span>
			</div>
			<div class="match-score">
				<span>{{ blocked.wins }} - {{ blocked.losses }}</span>
				<span class="online-status">ğŸš«</span>
				<i class="fas fa-lock-open friend-icon" onclick="unlockUser('{{ blocked.id }}')"></i>
			</div>
		</div>
		{% empty %}
		<p style="color: white;" data-i18n="friends.blocked.empty">There are no blocked users.</p>
		{% endfor %}
	</div>

	<!-- Other Users -->
	<div id="users-list" class="tab-content hidden">
		<!-- Header Row -->
		<div class="tab-header">
			<div style="flex: 1.5;">User</div>
			<div style="flex: 2;">Email</div>
			<div style="flex: 1;">Record</div>
			<div style="flex: 2;">Actions</div>
		</div>		

		{% for user in users %}
		<div class="tab-item">
			<!-- User -->
			<div class="tab-players">
				<img src="{{ user.image.url }}" class="user-avatar" />
				<span>{{ user.username }}</span>
			</div>

			<!-- Email -->
			<div class="tab-email">{{ user.email }}</div>

			<!-- Record -->
			<div class="tab-score">{{ user.wins }} - {{ user.losses }}</div>

			<!-- Actions -->
			<div class="tab-actions">
				<button onclick="chat('{{ user.username }}')">ğŸ’¬ Chat</button>
				<button id="friend-btn-{{ user.id }}" onclick="addFriend('{{ user.id }}')">â• Add Friend</button>
				<button class="block-btn" onclick="blockUser('{{ user.id }}')">ğŸš« Block</button>
			</div>
		</div>
		{% empty %}
		<p style="color: white;" data-i18n="friends.other.empty">There are no other users.</p>
		{% endfor %}
	</div>
</div>

