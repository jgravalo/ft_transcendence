<div class="profile-container">
	<div class="profile">
		<div class="profile-photo">
			<img src="{{ user.image.url }}">
		</div>
		<div class="info">
			<div class="username-container">
				<h1 class="username">{{ user.username }}</h1>
				<div class="settings-icon">
					<i class="fas fa-cog link" href="/users/update"></i>
				</div>
			</div>
			<div class="actions">
				<button class="link challenge-btn" href="/game" data-i18n="profile.dash.1v1">Play 1v1</button>
			</div>
		</div>
	</div>

	<div class="stats">
		<div class="stat-card">
			<div class="stat-icon trophy">ğŸ†</div>
			<div class="stat-value">{{ user.wins }}</div>
			<div class="stat-label" data-i18n="profile.dash.wins">Total Wins</div>
		</div>

		<!-- loses -->
		<div class="stat-card">
			<div class="stat-icon trophy">XXX</div>
			<div class="stat-value">{{ user.losses }}</div>
			<div class="stat-label" data-i18n="profile.dash.losses">Total Losses</div>
		</div>
		
		<div class="stat-card">
			<div class="stat-icon clock">ğŸ•’</div>
			<div class="stat-value">{{ user.matches }}</div>
			<div class="stat-label" data-i18n="profile.dash.matches">Games Played</div>
		</div>
		
		<div class="stat-card">
			<div class="stat-icon tournament">ğŸ‘‘</div>
			<div class="stat-value">XXX</div>
			<div class="stat-label" data-i18n="profile.dash.tournament">Tournament Wins</div>
		</div>
	</div>

		<!-- Tabs -->
	<div class="tabs">
		<button class="tab active" onclick="showTab('match-history', this)">Match History</button>
		<button class="tab" onclick="showTab('friends-list', this)">Friends</button>
		<button class="tab" onclick="showTab('blocked-list', this)">Blocked</button>
		<button class="tab" onclick="showTab('users-list', this)">Other Users</button>
	</div>

	<!-- Match History -->
	<div id="match-history" class="tab-content">
		<!-- Header Row -->
		<div class="tab-header">
			<div style="flex: 1;">Players</div>
			<div style="flex: 1;">Date</div>
			<div style="flex: 1;">Score</div>
		</div>

		{% if matches %}
			{% for match in matches %}
			<div class="match-item">
				<div class="tab-players">
					<span>{{ match.player1 }} vs {{ match.player2 }}</span>
				</div>
				<div class="tab-email">{{ match.created_at }}</div>
				<div class="tab-score">{{ match.score_player1 }} - {{ match.score_player2 }}</div>
			</div>
			{% endfor %}
		{% else %}
			<p style="color: white; text-align: center; padding: 20px;" data-i18n="profile.matches.empty">No matches played yet.</p>
		{% endif %}
	</div>

<!-- Friends List -->
<div id="friends-list" class="tab-content hidden">
	<!-- Header Row -->
	<div class="tab-header">
		<div style="flex: 1.5;">User</div>
		<div style="flex: 2;">Email</div>
		<div style="flex: 1;">Record</div>
		<div style="flex: 2;">Actions</div>
	</div>

	{% for friend in friends %}
	<div class="tab-item">
		<div class="tab-players">
			<img src="{{ friend.image.url }}" class="user-avatar" />
			<span>{{ friend.username }}</span>
			{% if friend.is_online %}
				<span class="online-status">ğŸŸ¢</span>
			{% else %}
				<span class="online-status">ğŸ”´</span>
			{% endif %}
		</div>
		<div class="tab-email">{{ friend.email }}</div>
		<div class="tab-score">{{ friend.wins }} - {{ friend.losses }}</div>
		<div class="tab-actions">
			<button onclick="chat('{{ friend.username }}')">ğŸ’¬ Chat</button>
			<button id="deletefriend-btn-{{ friend.id }}" onclick="deleteFriend('{{ friend.id }}')">ğŸ’” Unfriend</button>
		</div>
	</div>
	{% empty %}
	<p style="color: white;" data-i18n="friends.friends.empty">You don't have friends</p>
	{% endfor %}
</div>

	<!-- Blocked Users -->
	<div id="blocked-list" class="tab-content hidden">
		<!-- Header Row -->
		<div class="tab-header">
			<div style="flex: 1.5;">User</div>
			<div style="flex: 2;">Email</div>
			<div style="flex: 1;">Record</div>
			<div style="flex: 2;">Actions</div>
		</div>

		{% for blocked in blockeds %}
		<div class="tab-item">
			<div class="tab-players">
				<img src="{{ blocked.image.url }}" class="user-avatar" />
				<span>{{ blocked.username }}</span>
				<span class="online-status">ğŸš«</span>
			</div>
			<div class="tab-email">{{ blocked.email }}</div>
			<div class="tab-score">{{ blocked.wins }} - {{ blocked.losses }}</div>
			<div class="tab-actions">
				<button id="unblockfriend-btn-{{ blocked.id }}" onclick="unlockUser('{{ blocked.id }}')">ğŸ”“ Unblock</button>
				<!-- Potential: add 'Add friend' or 'Chat' if you want to do more here -->
			</div>
		</div>
		{% empty %}
		<p style="color: white;" data-i18n="friends.blocked.empty">There are no blocked users.</p>
		{% endfor %}
	</div>

	<!-- Other Users -->
	<div id="users-list" class="tab-content hidden">
		<!-- Header Row -->
		<div class="tab-header">
			<div style="flex: 1.5;">User</div>
			<div style="flex: 2;">Email</div>
			<div style="flex: 1;">Record</div>
			<div style="flex: 2;">Actions</div>
		</div>		
		
		{% for user in users %}
		<div class="tab-item">
			<div class="tab-players">
				<img src="{{ user.image.url }}" class="user-avatar" />
				<span>{{ user.username }}</span>
			</div>
			<div class="tab-email">{{ user.email }}</div>
			<div class="tab-score">{{ user.wins }} - {{ user.losses }}</div>
			<div class="tab-actions">
				<button id="chatfriend-btn-{{ user.id }}" onclick="chat('{{ user.username }}')">ğŸ’¬ Chat</button>
				<button id="addfriend-btn-{{ user.id }}" onclick="addFriend('{{ user.id }}')">â¤ï¸ Add Friend</button>
				<button id="blockfriend-btn-{{ user.id }}" class="block-btn" onclick="blockUser('{{ user.id }}')">ğŸš« Block</button>
			</div>
		</div>
		{% empty %}
		<p style="color: white;" data-i18n="friends.other.empty">There are no other users.</p>
		{% endfor %}
	</div>
</div>